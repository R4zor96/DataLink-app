<div class="bg-white rounded-xl shadow-xl p-8 max-w-5xl mx-auto mt-10">
  <h2 class="text-2xl font-bold text-center text-slate-800 mb-4">
    Generador de Reportes
  </h2>
  <p class="text-gray-600 text-center mb-8">
    Selecciona los gráficos que deseas incluir en el reporte PDF.
  </p>

  <!-- KPIs principales -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
    <app-kpi-card
      title="Encuestas"
      [value]="kpisGenerales?.totalEncuestas ?? 'N/A'"
      description="Total de encuestas"
      iconClass="fas fa-poll"
    ></app-kpi-card>

    <app-kpi-card
      title="Municipios"
      [value]="municipiosCubiertos"
      description="Municipios cubiertos"
      iconClass="fas fa-city"
    ></app-kpi-card>

    <app-kpi-card
      title="Distritos"
      [value]="distritosLocalesCubiertos"
      description="Distritos cubiertos"
      iconClass="fas fa-map"
    ></app-kpi-card>
  </div>

  <!-- Opciones de selección -->
  <div class="flex flex-wrap justify-center gap-4 mb-6">
    <label
      *ngFor="let grafico of graficos"
      class="flex items-center gap-2 bg-slate-50 hover:bg-slate-100 px-4 py-2 rounded-lg border border-slate-200 cursor-pointer"
    >
      <input
        type="checkbox"
        [(ngModel)]="grafico.seleccionado"
        class="accent-[#E71D36] w-4 h-4"
      />
      <span class="font-medium text-slate-700">{{ grafico.nombre }}</span>
    </label>
  </div>

  <!-- Contenedor de gráficos -->
  <div id="report-content" class="space-y-10">

    <!-- DEMOGRAFÍA -->
    <div id="chart-demografia" *ngIf="graficos[0].seleccionado" class="border rounded-lg p-4 shadow">
      <h3 class="text-lg font-semibold text-slate-700 mb-2">Demografía</h3>
      <app-pie-chart
        title="Distribución por Edad"
        description="Edad de los encuestados"
    [data]="questionResults['demografia']"
      ></app-pie-chart>
    </div>

    <!-- MAPA -->
    <div id="chart-mapa" *ngIf="graficos[1].seleccionado" class="border rounded-lg p-4 shadow">
      <h3 class="text-lg font-semibold text-slate-700 mb-2">Mapa Geográfico</h3>
      <app-heatmap-map [data]="ubicaciones"></app-heatmap-map>
    </div>

    <!-- PREFERENCIAS -->
    <div id="chart-preferencias" *ngIf="graficos[2].seleccionado" class="border rounded-lg p-4 shadow">
      <h3 class="text-lg font-semibold text-slate-700 mb-2">Preferencias Electorales</h3>
        <app-bar-chart
        title="Preferencias Electorales"
        description="Distribución por partido"
        [data]="questionResults['preferencias']"
      ></app-bar-chart>
    </div>

  </div>

  <!-- Botón Generar PDF -->
  <div class="flex justify-center mt-10">
    <button
      (click)="generatePDF()"
      class="bg-[#E71D36] text-white px-6 py-3 rounded-lg hover:bg-[#C4172D] transition flex items-center gap-2"
    >
      <i class="fas fa-file-pdf"></i>
      Generar Reporte PDF
    </button>
  </div>
</div>
